<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Chat Room</title>
</head>
<body>
	<h1>Chat Room</h1>
	<div id="message-container"></div>
	<form id="message-form">
		<input type="text" id="message-input" placeholder="Type a message...">
		<button type="submit" id="send-button">Send</button>
	</form>

	<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-database.js"></script>
	<script>
		// Initialize Firebase
		const firebaseConfig = {
			apiKey: "your-api-key",
			authDomain: "your-auth-domain",
			projectId: "your-project-id",
			storageBucket: "your-storage-bucket",
			messagingSenderId: "your-messaging-sender-id",
			appId: "your-app-id"
		};
		firebase.initializeApp(firebaseConfig);

		// Get a reference to the chat messages collection in the Firebase database.
		const messagesRef = firebase.database().ref('messages');

		 // Get a reference to the currently logged-in user.
		const currentUser = firebase.auth().currentUser;

		// Add a listener for when a new message is added to the database.
		messagesRef.on('child_added', function(data) {
			const message = data.val();
			const messageText = message.text;
			const senderId = message.senderId;

			if (senderId === currentUser.uid) {
				displayMessage('You: ' + messageText);
			} else {
				displayMessage('Stylist: ' + messageText);
			}
		});

		// Add a listener for when the user logs in or out.
		firebase.auth().onAuthStateChanged(function(user) {
			if (user) {
				// The user is logged in. Display the chat room.
				displayChatRoom();
			} else {
				// The user is logged out. Redirect to the login page.
				window.location.href = 'login.html';
			}
		});

		// Add a listener for when the user submits a new message.
		const messageForm = document.getElementById('message-form');
		messageForm.addEventListener('submit', function(event) {
			event.preventDefault();

			const messageInput = document.getElementById('message-input');
			const messageText = messageInput.value.trim();

			if (messageText !== '') {
				// Add the message to the database.
				const newMessageRef = messagesRef.push();
				newMessageRef.set({
					text: messageText,
					senderId: currentUser.uid,
				});

				// Clear the message input field.
				messageInput.value = '';
			}
		});

		// Function to display a message in the chat room.
		function displayMessage(messageText) {
			const messageContainer = document.getElementById('message-container');
			const messageElement = document.createElement('div');
			message
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Chat</title>
</head>
<body>
	<h1>Chat</h1>
	<div id="chat-log"></div>
	<form id="chat-form">
		<input type="text" id="message-input">
		<button type="submit">Send</button>
	</form>

	<script src="/socket.io/socket.io.js"></script>
	<script>
		const socket = io();

		const chatLog = document.getElementById('chat-log');
		const chatForm = document.getElementById('chat-form');
		const messageInput = document.getElementById('message-input');

		chatForm.addEventListener('submit', function(event) {
			event.preventDefault();
			const message = messageInput.value;

			if (message.trim()) {
				socket.emit('chat message', message);
				messageInput.value = '';
			}
		});

		socket.on('chat message', function(message) {
			const chatMessage = document.createElement('div');
			chatMessage.textContent = message;
			chatLog.appendChild(chatMessage);
		});
	</script>
</body>
</html>
